CREATE OR REPLACE TRIGGER valida_horario_curso2
BEFORE INSERT OR UPDATE OR DELETE ON TCONTRATO
BEGIN
  IF(TO_CHAR(SYSDATE,'D') IN (1, 7) OR
  TO_NUMBER(To_Char(SYSDATE,'HH24'))NOT BETWEEN 8 AND 18)THEN
    IF( INSERTING ) THEN
      RAISE_APPLICATION_ERROR(-20001, 'N達o pode inserir');
    ELSIF( DELETING ) THEN
      RAISE_APPLICATION_ERROR(-20002, 'N達o pode remover');
    ELSIF( UPDATING('TOTAL') ) THEN
      RAISE_APPLICATION_ERROR(-20003, 'N達o pode alterar total');
    ELSE
      RAISE_APPLICATION_ERROR(-20004, 'N達o pode alterar');
    END IF;
  END IF;
END;